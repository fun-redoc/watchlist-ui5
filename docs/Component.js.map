{"version":3,"file":"Component.js","names":["sap","ui","define","UIComponent","___services_DBManager","ManagedObjectModel","__MOWatchStock","___services_yFinApiService","__useCache","Device","_interopRequireDefault","obj","__esModule","default","mkDBManager","MOWatchStock","api_getAssetBatch","useCache","DB_NAME_WATCHLIST","DB_STORE_WATCHLIST","DB_VERSION_WATCHLIST","AppComponent","extend","constructor","prototype","apply","this","arguments","yFinPool","Promise","resolve","metadata","manifest","aggregations","watchlist","type","singularName","multiple","bindable","properties","deviceType","defaultValue","visibility","deviceIsNotTouch","deviceIsTouch","apiKey","cacheInterval","defaultAggregation","getI18nResourceBundle","async","_getI18nResourceBundle","i18nResourceBundle","i18nModel","getModel","getResourceBundle","init","_init","call","setModel","setDefaultBindingMode","model","setProperty","media","getCurrentRange","name","support","touch","getRouter","initialize","loadSettings","loadWatchlistFromIndexDB","destroy","_destroy","bSuppressInvalidate","console","log","onDeactivate","_onDeactivate","onActivate","_onActivate","saveSettings","_saveSettings","setTimeout","localStorage","setItem","API_KEY_STORAGE_ID","USE_CACHE_STORAGE_ID","CACHE_INTERVAL_STORAGE_ID","_loadSettings","getItem","useCacheString","cacheIntervalString","Number","parseInt","getWatchDBM","_getWatchDBM","dbm","_loadWatchlistFromIndexDB","destroyAggregation","me","indexName","isUnique","then","list","map","e","mo","symbol","setAggregation","watchSince","addAggregation","refresh","isAlreadyWatched","_isAlreadyWatched","watch","xs","getAggregation","find","x","getProperty","undefined","addToWatch","_addToWatch","dbManager","_","add","err","error","reject","addToYFinPool","_addToYFinPool","filter","newYFP","yfp","forEach","s","push","refreshYFinPool","getYFinPool","_getYFinPool","_refreshYFinPool","symbolsToFetch","Object","keys","filters","values","reduce","acc","o","yFinQuoteResults","fetchFromYFin","newYfp","r","_fetchFromYFin","doUseCache","fetchBatchApi","fetchBatchApiFn","fetchBatch","fetchBatchApiFnCached","timeOutMillis","result","start","length","bachEnd","Math","min","MAX_BATCH_SIZE","batch","slice","quoteResults","concat","refreshWatchlistMarketData","_refreshWatchlistMarketData","watched","getWatchlist","symbolsToMO","quotes","quote","updateFromQuote","warn","_updateFromQuote","propertyMap","getMetadata","getAllProperties","propertyNames","anyQuote","_getWatchlist"],"sources":["Component-dbg.js"],"mappings":"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","ignoreList":[]}