{"version":3,"file":"Component.js","names":["sap","ui","define","UIComponent","___services_DBManager","ManagedObjectModel","__MOWatchStock","___services_yFinApiService","__useCache","Device","_interopRequireDefault","obj","__esModule","default","mkDBManager","MOWatchStock","api_getAssetBatch","useCache","DB_NAME_WATCHLIST","DB_STORE_WATCHLIST","DB_VERSION_WATCHLIST","AppComponent","extend","constructor","prototype","apply","this","arguments","yFinPool","Promise","resolve","metadata","manifest","aggregations","watchlist","type","singularName","multiple","bindable","properties","deviceType","defaultValue","visibility","defaultAggregation","getI18nResourceBundle","async","_getI18nResourceBundle","i18nResourceBundle","i18nModel","getModel","getResourceBundle","init","_init","call","setModel","setDefaultBindingMode","model","setProperty","media","getCurrentRange","name","getRouter","initialize","apiKey","localStorage","getItem","API_KEY_STORAGE_ID","loadWatchlistFromIndexDB","destroy","_destroy","bSuppressInvalidate","console","log","onDeactivate","_onDeactivate","onActivate","_onActivate","saveApiKey","_saveApiKey","setItem","getApiKey","_getApiKey","getWatchDBM","_getWatchDBM","dbm","_loadWatchlistFromIndexDB","destroyAggregation","me","indexName","isUnique","then","list","map","e","mo","symbol","setAggregation","watchSince","addAggregation","refresh","addToWatch","_addToWatch","watch","dbManager","_","add","err","error","reject","addToYFinPool","_addToYFinPool","filter","newYFP","yfp","forEach","s","push","refreshYFinPool","getYFinPool","_getYFinPool","_refreshYFinPool","symbolsToFetch","Object","keys","filters","values","reduce","acc","o","yFinQuoteResults","fetchFromYFin","newYfp","r","_fetchFromYFin","fetchBatchApi","fetchBatchApiFn","fetchBatch","fetchBatchApiFnCached","timeOutMillis","result","start","length","bachEnd","Math","min","MAX_BATCH_SIZE","batch","slice","quoteResults","undefined","concat","refreshWatchlistMarketData","_refreshWatchlistMarketData","watched","getWatchlist","symbolsToMO","getProperty","quotes","quote","updateFromQuote","warn","_updateFromQuote","propertyMap","getMetadata","getAllProperties","propertyNames","anyQuote","_getWatchlist","getAggregation"],"sources":["Component-dbg.js"],"mappings":"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","ignoreList":[]}