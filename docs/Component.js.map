{"version":3,"file":"Component.js","names":["sap","ui","define","UIComponent","___services_DBManager","ManagedObjectModel","__MOWatchStock","___services_yFinApiService","__useCache","Device","_interopRequireDefault","obj","__esModule","default","mkDBManager","MOWatchStock","api_getAssetBatch","useCache","DB_NAME_WATCHLIST","DB_STORE_WATCHLIST","DB_VERSION_WATCHLIST","AppComponent","extend","constructor","prototype","apply","this","arguments","yFinPool","Promise","resolve","metadata","manifest","aggregations","watchlist","type","singularName","multiple","bindable","properties","deviceType","defaultValue","visibility","deviceIsNotTouch","deviceIsTouch","apiKey","cacheInterval","defaultAggregation","getI18nResourceBundle","async","_getI18nResourceBundle","i18nResourceBundle","i18nModel","getModel","getResourceBundle","init","_init","call","setModel","setDefaultBindingMode","model","setProperty","media","getCurrentRange","name","support","touch","getRouter","initialize","loadSettings","loadWatchlistFromIndexDB","destroy","_destroy","bSuppressInvalidate","console","log","onDeactivate","_onDeactivate","onActivate","_onActivate","saveSettings","_saveSettings","setTimeout","localStorage","setItem","API_KEY_STORAGE_ID","USE_CACHE_STORAGE_ID","CACHE_INTERVAL_STORAGE_ID","_loadSettings","getItem","useCacheString","cacheIntervalString","Number","parseInt","getWatchDBM","_getWatchDBM","dbm","_loadWatchlistFromIndexDB","destroyAggregation","me","indexName","isUnique","then","list","map","e","mo","symbol","setAggregation","watchSince","addAggregation","refresh","addToWatch","_addToWatch","watch","dbManager","_","add","err","error","reject","addToYFinPool","_addToYFinPool","filter","newYFP","yfp","forEach","s","push","refreshYFinPool","getYFinPool","_getYFinPool","_refreshYFinPool","getProperty","symbolsToFetch","Object","keys","filters","values","reduce","acc","o","yFinQuoteResults","fetchFromYFin","newYfp","r","_fetchFromYFin","doUseCache","fetchBatchApi","fetchBatchApiFn","fetchBatch","fetchBatchApiFnCached","timeOutMillis","result","start","length","bachEnd","Math","min","MAX_BATCH_SIZE","batch","slice","quoteResults","undefined","concat","refreshWatchlistMarketData","_refreshWatchlistMarketData","watched","getWatchlist","symbolsToMO","quotes","quote","updateFromQuote","warn","_updateFromQuote","propertyMap","getMetadata","getAllProperties","propertyNames","anyQuote","_getWatchlist","getAggregation"],"sources":["Component-dbg.js"],"mappings":"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","ignoreList":[]}