{"version":3,"file":"formatter.js","names":["__exports","rm","formatStatusText","status","rb","getResourceBundle","getText","formatMinutes","amt","console","log","formatAsTimeDuration","millis","remSeconds","Math","floor","sec","strSec","String","padStart","remMin","min","strMin","remHrs","hrs","strHrs","remDays","strDays","formatAsCurrency","cur","cur1","language","navigator","fmtedAmt","Intl","NumberFormat","style","currency","format","formatAsCurrencyTrace","formatPercentFromDecimal","value","toFixed","formatPercent","formatTime","timestamp","gmtOffset","time","Date","toLocaleString","formatKind","kind","formatDate","date","DateFormat","getDateInstance","pattern"],"sources":["formatter.ts"],"sourcesContent":["import ResourceBundle from \"sap/base/i18n/ResourceBundle\"\nimport DateFormat from \"sap/ui/core/format/DateFormat\"\nimport ResourceModel from \"sap/ui/model/resource/ResourceModel\"\n\n/**\n * @namespace rsh.watchlist.ui5\n */\nexport default function(rm?: ResourceModel) {\n    return {\n        formatStatusText: async function(status:string): Promise<string> {\n            // the formater seems to be called even bevore onInit fires!!!\n            const rb = await rm?.getResourceBundle()\n            switch(status) {\n                case \"OK\": \n                    return rb?.getText(\"statusOK\") || `(${status})`\n                case \"NOK\": \n                    return rb?.getText(\"statusNOK\") || `(${status})`\n                default: return status\n            }\n        },\n        formatMinutes: function(amt?:number): string {\n            // TODO make locale dependent\n            console.log(\"formatMinutes\")\n            if(amt) {\n                return `${amt} min`\n            } else {\n                return '-'\n            }\n        },\n        formatAsTimeDuration: function(millis?:number): string {\n            if(millis) {\n                const remSeconds = Math.floor(millis / 1000)\n                const sec = remSeconds % 60\n                const strSec = (sec >= 1 ? String(sec) : \"0\").padStart(2,'0')\n                const remMin = Math.floor(remSeconds / 60)\n                const min = remMin % 60\n                const strMin = (min >= 1 ? String(min) : \"0\").padStart(2,'0')\n                const remHrs = Math.floor(remMin / 60)\n                const hrs = remHrs % 60\n                const strHrs = (hrs >= 1 ? String(hrs) : \"0\").padStart(2,'0')\n                const remDays = Math.floor(remHrs / 24)\n                const strDays = (remDays >= 1 ? String(remDays)+':' : \"\") \n                return `${strDays}${strHrs}:${strMin}:${strSec}`\n            } else {\n                return '-'\n            }\n        },\n        formatAsCurrency: function(amt?:number, cur?:string): string {\n            if(amt) {\n                const cur1 = cur ||  \"XXX\" // XXX is no currency according to https://en.wikipedia.org/wiki/ISO_4217#List_of_ISO_4217_currency_codes\n                const language = navigator.language\n                const fmtedAmt =  new Intl.NumberFormat(language, { style: 'currency', currency: cur1 }).format(amt);\n                return fmtedAmt\n            } else {\n                return '-'\n            }\n        },\n        formatAsCurrencyTrace: function(amt?:number, cur?:string): string {\n            console.log(\"formatAsCurrencyTrace\", amt, cur)\n            if(amt) {\n                const cur1 = cur ||  \"XXX\" // XXX is no currency according to https://en.wikipedia.org/wiki/ISO_4217#List_of_ISO_4217_currency_codes\n                const language = navigator.language\n                const fmtedAmt =  new Intl.NumberFormat(language, { style: 'currency', currency: cur1 }).format(amt);\n                return fmtedAmt\n            } else {\n                return '-'\n            }\n        },\n        formatPercentFromDecimal: async function(value:number): Promise<string> {\n            // the formater seems to be called even bevore onInit fires!!!\n            return `${(value*100).toFixed(1)}%`\n        },\n        formatPercent: async function(value:number): Promise<string> {\n            // the formater seems to be called even bevore onInit fires!!!\n            return `${value}%`\n        },\n        formatTime: async function(timestamp?:number, gmtOffset?:number): Promise<string> {\n            // the formater seems to be called even bevore onInit fires!!!\n            //console.log(\"formatter:formatTime\", timestamp, gmtOffset, timestamp, gmtOffset)\n            if( timestamp && gmtOffset ) {\n                const time = new Date(timestamp * 1000) // + gmtOffset) // gmtOffset offests to the local time of the market\n                                                                        // what I want my local time of the market\n                return `${time.toLocaleString()}`\n            } \n            if( timestamp && !gmtOffset ) {\n                const time = new Date(timestamp * 1000 )\n                return `${time.toLocaleString()}`\n            }\n            return '-'\n\n        },\n        formatKind: async function(kind:string): Promise<string> {\n            // the formater seems to be called even bevore onInit fires!!!\n            const rb = await rm?.getResourceBundle()\n            switch(kind) {\n                case \"S\": \n                    return rb?.getText(\"sell\") || `(${kind})`\n                case \"B\": \n                    return rb?.getText(\"buy\") || `(${kind})`\n                default: return kind\n            }\n        },\n        formatDate:  function(date:Date):string {\n            let format = DateFormat.getDateInstance ({\n                pattern: \"yyyy.MM.dd\"\n            });\n            return format.format(date);\n        }\n    }\n}\n"],"mappings":"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","ignoreList":[]}