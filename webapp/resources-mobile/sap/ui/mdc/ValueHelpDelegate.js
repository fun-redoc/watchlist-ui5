/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/BaseDelegate","sap/ui/model/FilterType","sap/ui/mdc/enums/ConditionValidated","sap/ui/mdc/enums/OperatorName","sap/ui/mdc/condition/Condition","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterProcessor","sap/ui/mdc/condition/FilterConverter","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/Device","sap/ui/mdc/enums/FieldDisplay"],(e,t,i,n,o,s,r,a,l,c,u,d)=>{"use strict";const p=function(e,t,i,n){const o=n.getConditions();const s=a.apply(e,t,(e,t)=>e&&e.getProperty(t));return s.find(e=>!this.findConditionsForContext(i,n,e,o).length)};const f=Object.assign({},e);f.retrieveContent=function(e,t,i){return Promise.resolve()};f.isSearchSupported=function(e,t,i){return false};f.showTypeahead=function(e,t){if(u.system.phone){return true}if(!t||t.isA("sap.ui.mdc.valuehelp.base.FilterableListContent")&&!t.getFilterValue()){return false}else if(t.isA("sap.ui.mdc.valuehelp.base.ListContent")){const e=t.getListBinding();const i=e&&e.getCurrentContexts().length;return i>0}return true};f.updateBindingInfo=function(e,t,i){i.parameters={};i.filters=this.getFilters(e,t)};f.getFilters=function(e,t){const s=t.getActiveFilterBar();const r=s?s.getConditions():t._oInitialFilterConditions||{};if(!t.isPropertyInitial("filterFields")){const e=t.getFilterFields();const a=t.getSearch();if(!s&&a&&e&&e!=="$search"){const t=o.createCondition(n.Contains,[a],undefined,undefined,i.NotValidated);r[e]=[t]}}const a=r&&this.getTypesForConditions(e,t,r);const c=r&&l.createFilters(r,a,undefined,t.getCaseSensitive());return c?[c]:[]};f.updateBinding=function(e,i,n,o){i.filter(n.filters,t.Application);if(i.isSuspended()){i.resume()}};f.adjustSearch=function(e,t,i){return i};f.executeFilter=function(e,t,i){return Promise.resolve(t)};f.checkListBindingPending=function(e,t,i){if(!t||t.isSuspended()){return false}return Promise.resolve(t.getContexts(0,i)).then(e=>e.length===0)};f.onConditionPropagation=function(e,t,i){};f.getInitialFilterConditions=function(e,t,i){const n={};return n};f.findConditionsForContext=function(e,t,i,n){const o=t.getItemFromContext(i);const s=o&&t.createCondition(o.key,o.description,o.payload);return n.filter(t=>this.compareConditions(e,s,t))};f.compareConditions=function(e,t,n){if(t.operator===n.operator){if(t.validated===i.Validated&&t.validated===n.validated){return t.values[0]===n.values[0]}return c.getOperator(t.operator)?.compareConditions(t,n)}return false};f.modifySelectionBehaviour=function(e,t,i){return i};f.createConditionPayload=function(e,t,i,n){return undefined};f.getTypesForConditions=function(e,t,i){const n={};const o=t&&t.getListBindingInfo();if(o&&o.template){o.template.mAggregations.cells.forEach(e=>{Object.values(e.mBindingInfos).forEach(e=>{e.parts.forEach(e=>{n[e.path]={type:e.type||null}})})},{})}return n};f.getFilterConditions=function(e,t,i){if(this.getInitialFilterConditions){return this.getInitialFilterConditions(e,t,i&&i.control||t&&t.getControl())}return{}};f.getFirstMatch=function(e,t,i){let n;const o=t.getListBinding(i)?.getCurrentContexts();const a=i.value;if(a&&o?.length){const l=i.hasOwnProperty("caseSensitive")?i.caseSensitive:t.getCaseSensitive();const c=t.getKeyPath();const u=i.checkDescription&&t.getDescriptionPath();let f;switch(e.getDisplay()){case d.Description:f=[u];break;case d.DescriptionValue:f=[u,c];break;case d.ValueDescription:f=[c,u];break;default:f=[c];break}f=f.filter(e=>!!e);for(const i of f){const c=[new s({path:i,operator:r.EQ,value1:a,caseSensitive:l}),new s({path:i,operator:r.StartsWith,value1:a,caseSensitive:l})];for(const i of c){n=p.call(this,o,i,e,t);if(n){return n}}}}return n};f.isFilteringCaseSensitive=function(e,t){return t.getCaseSensitive()};f.shouldOpenOnFocus=function(e,t){let i=false;if(t.isA("sap.ui.mdc.valuehelp.Popover")){i=t.getOpensOnFocus()}return Promise.resolve(i)};f.shouldOpenOnClick=function(e,t){let i=false;if(t.isA("sap.ui.mdc.valuehelp.Popover")){if(u.system.phone&&(!t.isSingleSelect()||!t.isDialog())){i=true}else{let e=true;if(!t.isPropertyInitial("opensOnClick")){e=false;i=t.getOpensOnClick()}if(e){const e=t._getContent();i=!!e&&e.shouldOpenOnClick()}}}return Promise.resolve(i)};return f});
//# sourceMappingURL=ValueHelpDelegate.js.map