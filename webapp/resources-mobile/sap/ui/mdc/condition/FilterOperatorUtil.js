/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Lib","sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/ui/model/ValidateException","sap/base/Log","sap/ui/mdc/enums/FieldDisplay","sap/ui/mdc/enums/OperatorName","./Operator","./RangeOperator","sap/ui/mdc/enums/BaseType","sap/ui/mdc/enums/ConditionValidated","sap/ui/mdc/enums/OperatorValueType","sap/ui/mdc/util/loadModules","sap/ui/core/date/UniversalDate","sap/ui/core/date/UniversalDateUtils","sap/ui/core/format/DateFormat","sap/ui/core/StaticArea","sap/ui/model/json/JSONModel","sap/ui/model/type/Integer","sap/base/i18n/Localization"],(e,t,a,r,n,o,s,l,i,u,p,m,T,c,f,O,g,y,d,h)=>{"use strict";let E=e.getResourceBundleFor("sap.ui.mdc");h.attachChange(()=>{E=e.getResourceBundleFor("sap.ui.mdc")});const _={_mOperators:{equal:new l({name:s.EQ,alias:{Date:"DATE",DateTime:"DATETIME"},filterOperator:t.EQ,tokenTest:"^=(.+)?$",tokenParse:"^=?(.+)?$",tokenFormat:"{1} ({0})",longText:A(s.EQ,true),valueTypes:[m.Self,null],displayFormats:{DescriptionValue:"{1} ({0})",ValueDescription:"{0} ({1})",Description:"{1}",Value:"{0}"},format:function(e,t,a,r,n,s,l){a=a||o.DescriptionValue;let i=this.valueTypes.length;const u=e.values;const m=e&&e.validated===p.Validated||u.length===2||r?"":"=";let T=m+this.displayFormats[a];if(!u[1]){T=m+this.displayFormats["Value"];i=1}for(let e=0;e<i;e++){let a,r=u[e];if(r===null||r===undefined){r=""}if(e===0){a=this._formatValue(r,t,n)}else{a=this._formatValue(r,s,l)}if(a===null){T=null;break}if(typeof a==="string"){a=a.replace(/\$/g,"$$$")}T=T.replace(new RegExp("\\$"+e+"|"+e+"\\$"+"|"+"\\{"+e+"\\}","g"),a)}return T},parse:function(e,t,a,r,n,s,i,u){a=a||o.DescriptionValue;let p=l.prototype.parse.apply(this,[e,t,a,r,n,s,i,u]);if(r&&(!p||p[0]===null||p[0]===undefined)&&a!==o.Value){a=o.Value;p=l.prototype.parse.apply(this,[e,t,a,r,n,s,i,u])}if(p&&(p[1]===null||p[1]===undefined)&&a===o.Value){p=[p[0]]}return p},getValues:function(e,t,a,r){const n=r?this.hiddenOperatorRegExp:this.tokenParseRegExp;const o=e.match(n);let s;if(o&&o.length>1&&o[1]!==undefined){const e=o[1];const a=this.displayFormats[t];const r=a.indexOf("{0}");const n=a.indexOf("{1}");let l;let i;if(r>=0&&n>=0){const t=r<n;let o=t?a.substring(r+3,n):a.substring(n+3,r);const s=t?a.slice(n+3):a.slice(r+3);let u=t?e.indexOf(o):e.lastIndexOf(o);if(u===-1){o="(";u=t?e.indexOf(o):e.lastIndexOf(o)}if(u>0&&(e.lastIndexOf(s)===e.length-s.length||e.lastIndexOf(s)<u)){let a=e.length;if(e.slice(a-s.length)===s){a=a-s.length}const r=e.substring(0,u);const n=e.substring(u+o.length,a);if(t){l=r;i=n}else{l=n;i=r}}else if(t){l=e}else{i=e}}else if(r>=0){l=e}else{i=e}s=[l];if(n>=0){s.push(i)}}return s},isEmpty:function(e,t){let a=false;const r=e.values[0];if((r===null||r===undefined||r==="")&&!e.values[1]){a=true}return a},getCheckValue:function(e){return{value:e.values[0]}},checkValidated:function(e){if(e.values.length===2&&e.values[0]!==undefined&&e.values[1]!==null&&e.values[1]!==undefined){e.validated=p.Validated}else{e.validated=p.NotValidated}},validateInput:true,getTextForCopy:function(e,t,a,r,n,o,s){if(e.validated!==p.Validated){return l.prototype.getTextForCopy.apply(this,arguments)}else{const[a,r]=e.values;const l=this._formatValue(a,t,n);const i=r===undefined?"":this._formatValue(r,o,s);return l+"\t"+i}}}),between:new l({name:s.BT,alias:{Date:"DATERANGE",DateTime:"DATETIMERANGE"},filterOperator:t.BT,tokenTest:"^([^!].*)\\.\\.\\.(.+)$",tokenParse:"^(.*)\\.\\.\\.(.*)$|^(.+)$",tokenFormat:"{0}...{1}",longText:A(s.BT,true),valueTypes:[m.Self,m.Self],validate:function(e,t){if(e.length===2){if(S(e[0])&&S(e[1])){return}else if(S(e[0])||S(e[1])){throw new r(E.getText("operator.between.validate.missingValue"))}else if(e[0]===e[1]){throw new r(E.getText("operator.between.validate.sameValues"))}}l.prototype.validate.apply(this,[e,t])}}),notBetween:new l({name:s.NOTBT,filterOperator:t.NB,tokenTest:["^!\\((.+)\\.\\.\\.(.+)\\)$","^!(.+)\\.\\.\\.(.+)$"].join("|"),tokenParse:["^!\\((.*)\\.\\.\\.(.*)\\)$","^!(.*)\\.\\.\\.(.*)$","^(.+)$"].join("|"),tokenFormat:"!({0}...{1})",longText:A(s.NOTBT,true),valueTypes:[m.Self,m.Self],exclude:true,validate:function(e,t){_._mOperators.between.validate(e,t)}}),lessThan:new l({name:s.LT,filterOperator:t.LT,tokenTest:"^<([^=].*)?$",tokenParse:"^<?(.+)?$",tokenFormat:"<{0}",longText:A(s.LT,true),longTextForTypes:k(s.LT,[u.Date]),valueTypes:[m.Self]}),notLessThan:new l({name:s.NOTLT,filterOperator:t.GE,tokenTest:["^!\\(<([^=].*)?\\)$","^!<([^=].*)?$"].join("|"),tokenParse:["^!\\(<?(.+)?\\)$","^(!<)?(.+)?$"].join("|"),tokenFormat:"!(<{0})",longText:A(s.NOTLT,true),longTextForTypes:k(s.NOTLT,[u.Date]),valueTypes:[m.Self],exclude:true}),greaterThan:new l({name:s.GT,filterOperator:t.GT,tokenTest:"^>([^=].*)?$",tokenParse:"^>?(.+)?$",tokenFormat:">{0}",longText:A(s.GT,true),longTextForTypes:k(s.GT,[u.Date]),valueTypes:[m.Self]}),notGreaterThan:new l({name:s.NOTGT,filterOperator:t.LE,tokenTest:["^!\\(>([^=].*)?\\)$","^!>([^=].*)?$"].join("|"),tokenParse:["^!\\(>(.+)?\\)$","^(!>)?(.+)?$"].join("|"),tokenFormat:"!(>{0})",longText:A(s.NOTGT,true),longTextForTypes:k(s.NOTGT,[u.Date]),valueTypes:[m.Self],exclude:true}),lessEqual:new l({name:s.LE,alias:{Date:"TO",DateTime:"TODATETIME"},filterOperator:t.LE,tokenTest:"^<=(.+)?$",tokenParse:"^(<=)?(.+)?$",tokenFormat:"<={0}",longText:A(s.LE,true),longTextForTypes:k(s.LE,[u.Date]),valueTypes:[m.Self]}),notLessEqual:new l({name:s.NOTLE,filterOperator:t.GT,tokenTest:["^!\\(<=(.+)?\\)$","^!<=(.+)?$"].join("|"),tokenParse:["^!\\(<=(.+)?\\)$","^(!<=)?(.+)?$"].join("|"),tokenFormat:"!(<={0})",longText:A(s.NOTLE,true),longTextForTypes:k(s.NOTLE,[u.Date]),valueTypes:[m.Self],exclude:true}),greaterEqual:new l({name:s.GE,alias:{Date:"FROM",DateTime:"FROMDATETIME"},filterOperator:t.GE,tokenTest:"^>=(.+)?$",tokenParse:"^(>=)?(.+)?$",tokenFormat:">={0}",longText:A(s.GE,true),longTextForTypes:k(s.GE,[u.Date]),valueTypes:[m.Self]}),notGreaterEqual:new l({name:s.NOTGE,filterOperator:t.LT,tokenTest:["^!\\(>=(.+)?\\)$","^!>=(.+)?$"].join("|"),tokenParse:["^!\\(>=(.+)?\\)$","^(!>=)?(.+)?$"].join("|"),tokenFormat:"!(>={0})",longText:A(s.NOTGE,true),longTextForTypes:k(s.NOTGE,[u.Date]),valueTypes:[m.Self],exclude:true}),startsWith:new l({name:s.StartsWith,filterOperator:t.StartsWith,tokenTest:"^([^!\\*]+.*)\\*$",tokenParse:"^(.+)\\*$|^(.*[^\\*])$",tokenFormat:"{0}*",longText:A(s.StartsWith,true),valueTypes:[m.SelfNoParse]}),notStartsWith:new l({name:s.NotStartsWith,filterOperator:t.NotStartsWith,tokenTest:["^!\\(([^\\*].*)\\*\\)$","^!([^\\*].*)\\*$"].join("|"),tokenParse:["^!\\((.+)\\*\\)$","^!?(.+)\\*$","^(.*[^\\*])$"].join("|"),tokenFormat:"!({0}*)",longText:A(s.NotStartsWith,true),valueTypes:[m.SelfNoParse],exclude:true}),endsWith:new l({name:s.EndsWith,filterOperator:t.EndsWith,tokenTest:"^\\*(.*[^\\*])$",tokenParse:"^\\*?(.+)?$",tokenFormat:"*{0}",longText:A(s.EndsWith,true),valueTypes:[m.SelfNoParse]}),notEndsWith:new l({name:s.NotEndsWith,filterOperator:t.NotEndsWith,tokenTest:["^!\\(\\*(.*[^\\*])\\)$","^!\\*(.*[^\\*])$"].join("|"),tokenParse:["^!\\(\\*(.+)?\\)$","^(!\\*)?(.+)?$"].join("|"),tokenFormat:"!(*{0})",longText:A(s.NotEndsWith,true),valueTypes:[m.SelfNoParse],exclude:true}),contains:new l({name:s.Contains,filterOperator:t.Contains,tokenTest:"^\\*(.*)\\*$",tokenParse:"^\\*(.+)?\\*$|^([^\\*]?.*[^\\*]?)$",tokenFormat:"*{0}*",longText:A(s.Contains,true),valueTypes:[m.SelfNoParse]}),notContains:new l({name:s.NotContains,filterOperator:t.NotContains,tokenTest:["^!\\(\\*(.*)\\*\\)$","^!\\*(.*)\\*$"].join("|"),tokenParse:["^!\\(\\*(.+)?\\*\\)$","^!\\*(.+)?\\*$","^!?(.+)$"].join("|"),tokenFormat:"!(*{0}*)",longText:A(s.NotContains,true),valueTypes:[m.SelfNoParse],exclude:true}),notEqual:new l({name:s.NE,filterOperator:t.NE,tokenTest:["^!\\(=(.+)?\\)$","^!=(.+)?$"].join("|"),tokenParse:["^!\\(=(.+)?\\)$","^(!=)?(.+)?$"].join("|"),tokenFormat:"!(={0})",longText:A(s.NE,true),valueTypes:[m.Self],exclude:true}),empty:new l({name:s.Empty,filterOperator:t.EQ,tokenParse:"^<#tokenText#>$",tokenFormat:"<#tokenText#>",longText:A(s.Empty,true),tokenText:A(s.Empty,false),valueTypes:[],getModelFilter:function(e,r,n,o,s){let l=false;if(n){const e=n.parseValue("","string");try{n.validateValue(e);l=e===null}catch(e){l=false}}if(l){return new a({filters:[new a({path:r,operator:t.EQ,value1:""}),new a({path:r,operator:t.EQ,value1:null})],and:false})}else{return new a({path:r,operator:this.filterOperator,value1:""})}}}),notEmpty:new l({name:s.NotEmpty,filterOperator:t.NE,tokenParse:["^!\\(<#tokenText#>\\)$","^!<#tokenText#>$"].join("|"),tokenFormat:"!(<#tokenText#>)",longText:A(s.NotEmpty,true),tokenText:A(s.NotEmpty,false),valueTypes:[],exclude:true,getModelFilter:function(e,r,n,o,s){let l=false;if(n){const e=n.parseValue("","string");try{n.validateValue(e);l=e===null}catch(e){l=false}}if(l){return new a({filters:[new a({path:r,operator:t.NE,value1:""}),new a({path:r,operator:t.NE,value1:null})],and:true})}else{return new a({path:r,operator:this.filterOperator,value1:""})}}}),yesterday:new i({name:s.YESTERDAY,longText:A(s.YESTERDAY,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.yesterday()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),today:new i({name:s.TODAY,longText:A(s.TODAY,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.today()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),tomorrow:new i({name:s.TOMORROW,longText:A(s.TOMORROW,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.tomorrow()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),lastDays:new i({name:s.LASTDAYS,tokenText:A(s.LASTDAYS,false),valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return f.ranges.lastDays(e)}}),firstDayWeek:new i({name:s.FIRSTDAYWEEK,longText:A(s.FIRSTDAYWEEK,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.firstDayOfWeek()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),lastDayWeek:new i({name:s.LASTDAYWEEK,longText:A(s.LASTDAYWEEK,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.lastDayOfWeek()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),firstDayMonth:new i({name:s.FIRSTDAYMONTH,longText:A(s.FIRSTDAYMONTH,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.firstDayOfMonth()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),lastDayMonth:new i({name:s.LASTDAYMONTH,longText:A(s.LASTDAYMONTH,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.lastDayOfMonth()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),firstDayQuarter:new i({name:s.FIRSTDAYQUARTER,longText:A(s.FIRSTDAYQUARTER,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.firstDayOfQuarter()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),lastDayQuarter:new i({name:s.LASTDAYQUARTER,longText:A(s.LASTDAYQUARTER,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.lastDayOfQuarter()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),firstDayYear:new i({name:s.FIRSTDAYYEAR,longText:A(s.FIRSTDAYYEAR,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.firstDayOfYear()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),lastDayYear:new i({name:s.LASTDAYYEAR,longText:A(s.LASTDAYYEAR,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.lastDayOfYear()},formatRange:function(e,t){return t.formatValue(e[0],"string")}}),todayFromTo:new i({name:s.TODAYFROMTO,tokenText:A(s.TODAYFROMTO,false),valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null}},{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null}}],paramTypes:["([-+]?\\d+)","([-+]?\\d+)"],additionalInfo:"",calcRange:function(e,t){let a=e>=0?f.ranges.lastDays(e)[0]:f.ranges.nextDays(-e)[1];let r=t>=0?f.ranges.nextDays(t)[1]:f.ranges.lastDays(-t)[0];if(a.oDate.getTime()>r.oDate.getTime()){r=[a,a=r][0]}return[f.resetStartTime(a),f.resetEndTime(r)]}}),nextDays:new i({name:s.NEXTDAYS,tokenText:A(s.NEXTDAYS,false),valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return f.ranges.nextDays(e)}}),lastWeek:new i({name:s.LASTWEEK,longText:A(s.LASTWEEK,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.lastWeek()}}),thisWeek:new i({name:s.THISWEEK,longText:A(s.THISWEEK,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.currentWeek()}}),nextWeek:new i({name:s.NEXTWEEK,longText:A(s.NEXTWEEK,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.nextWeek()}}),lastWeeks:new i({name:s.LASTWEEKS,tokenText:A(s.LASTWEEKS,false),valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return f.ranges.lastWeeks(e)}}),nextWeeks:new i({name:s.NEXTWEEKS,tokenText:A(s.NEXTWEEKS,false),valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return f.ranges.nextWeeks(e)}}),lastMonth:new i({name:s.LASTMONTH,longText:A(s.LASTMONTH,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.lastMonth()}}),thisMonth:new i({name:s.THISMONTH,longText:A(s.THISMONTH,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.currentMonth()}}),nextMonth:new i({name:s.NEXTMONTH,longText:A(s.NEXTMONTH,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.nextMonth()}}),lastMonths:new i({name:s.LASTMONTHS,tokenText:A(s.LASTMONTHS,false),valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return f.ranges.lastMonths(e)}}),nextMonths:new i({name:s.NEXTMONTHS,tokenText:A(s.NEXTMONTHS,false),valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return f.ranges.nextMonths(e)}}),lastQuarter:new i({name:s.LASTQUARTER,longText:A(s.LASTQUARTER,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.lastQuarter()}}),thisQuarter:new i({name:s.THISQUARTER,longText:A(s.THISQUARTER,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.currentQuarter()}}),nextQuarter:new i({name:s.NEXTQUARTER,longText:A(s.NEXTQUARTER,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.nextQuarter()}}),lastQuarters:new i({name:s.LASTQUARTERS,tokenText:A(s.LASTQUARTERS,false),valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return f.ranges.lastQuarters(e)}}),nextQuarters:new i({name:s.NEXTQUARTERS,tokenText:A(s.NEXTQUARTERS,false),valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return f.ranges.nextQuarters(e)}}),quarter1:new i({name:s.QUARTER1,longText:A(s.QUARTER1,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.quarter(1)}}),quarter2:new i({name:s.QUARTER2,longText:A(s.QUARTER2,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.quarter(2)}}),quarter3:new i({name:s.QUARTER3,longText:A(s.QUARTER3,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.quarter(3)}}),quarter4:new i({name:s.QUARTER4,longText:A(s.QUARTER4,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.quarter(4)}}),lastYear:new i({name:s.LASTYEAR,longText:A(s.LASTYEAR,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.lastYear()}}),thisYear:new i({name:s.THISYEAR,longText:A(s.THISYEAR,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.currentYear()}}),nextYear:new i({name:s.NEXTYEAR,longText:A(s.NEXTYEAR,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.nextYear()}}),lastYears:new i({name:s.LASTYEARS,tokenText:A(s.LASTYEARS,false),valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return f.ranges.lastYears(e)}}),nextYears:new i({name:s.NEXTYEARS,tokenText:A(s.NEXTYEARS,false),valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return f.ranges.nextYears(e)}}),specificMonth:new i({name:s.SPECIFICMONTH,longText:A(s.SPECIFICMONTH,true),tokenText:A(s.SPECIFICMONTH,false),valueTypes:[{name:"sap.ui.model.type.Integer",constraints:{minimum:0,maximum:11}}],paramTypes:["(.+)"],additionalInfo:"",label:[E.getText("operators.SPECIFICMONTH_MONTH.label")],defaultValues:function(){const e=new c;return[e.getMonth()]},calcRange:function(e){let t=new c;t.setMonth(e);t=f.getMonthStartDate(t);return f.getRange(0,"MONTH",t)},format:function(e,t,a,r,n,o,s){const l=e.values[0];const i=this.tokenFormat;const u=R.apply(this)[l];if(r){return u}else{return u==null?null:i.replace(new RegExp("\\$"+0+"|"+0+"\\$"+"|"+"\\{"+0+"\\}","g"),u)}},getValues:function(e,t,a,r){const n=l.prototype.getValues.apply(this,arguments);if(n){return[D.call(this,n[0])]}return null},createControl:function(e,t,a,r){const o=sap.ui.require("sap/ui/mdc/Field");const s=w.call(this);if(o&&s){const a=new o(r,{value:{path:t,type:e,mode:"TwoWay",targetType:"raw"},display:"Description",width:"100%",valueHelp:s});return a}else{n.warning("Operator.createControl","not able to create the control for the operator "+this.name);return null}}}),specificMonthInYear:new i({name:s.SPECIFICMONTHINYEAR,longText:A(s.SPECIFICMONTHINYEAR,true),tokenText:A(s.SPECIFICMONTHINYEAR,false),valueTypes:[{name:"sap.ui.model.type.Integer",constraints:{minimum:0,maximum:11}},{name:"sap.ui.model.type.Integer",constraints:{minimum:1,maximum:9999}}],paramTypes:["(.+)","(.+)"],additionalInfo:"",label:[E.getText("operators.SPECIFICMONTHINYEAR_MONTH.label"),E.getText("operators.SPECIFICMONTHINYEAR_YEAR.label")],defaultValues:function(){const e=new c;return[e.getMonth(),e.getFullYear()]},calcRange:function(e,t){let a=new c;a.setMonth(e);a.setYear(t);a=f.getMonthStartDate(a);return f.getRange(0,"MONTH",a)},format:function(e,t,a,r,n,o,s){const l=e.values[0];const i=e.values[1];let u=this.tokenFormat;const p=R.apply(this)[l];if(r){return p+","+i}else{const e=new RegExp("\\$"+0+"|"+0+"\\$"+"|"+"\\{"+0+"\\}","g");const t=new RegExp("\\$"+1+"|"+1+"\\$"+"|"+"\\{"+1+"\\}","g");u=p==null?null:u.replace(e,p);return u.replace(t,i)}},getValues:function(e,t,a,r){const n=l.prototype.getValues.apply(this,arguments);if(n){return[D.call(this,n[0]),n[1]]}return null},createControl:function(e,t,a,r){let o;const s=sap.ui.require("sap/ui/mdc/Field");if(!s){n.warning("Operator.createControl","not able to create the control for the operator "+this.name);return null}if(a==0){const a=w.call(this);if(a){o=new s(r,{value:{path:t,type:e,mode:"TwoWay",targetType:"raw"},display:"Description",width:"100%",valueHelp:a})}else{n.warning("Operator.createControl","not able to create the control for the operator "+this.name)}}if(a==1){o=new s(r,{value:{path:"$this>",type:e,mode:"TwoWay",targetType:"raw"},width:"100%"})}return o}}),yearToDate:new i({name:s.YEARTODATE,longText:A(s.YEARTODATE,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.yearToDate()}}),dateToYear:new i({name:s.DATETOYEAR,longText:A(s.DATETOYEAR,true),valueTypes:[m.Static],calcRange:function(){return f.ranges.dateToYear()}}),lastMinutes:new i({name:s.LASTMINUTES,tokenText:A(s.LASTMINUTES,false),valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return f.ranges.lastMinutes(e)}}),nextMinutes:new i({name:s.NEXTMINUTES,tokenText:A(s.NEXTMINUTES,false),valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return f.ranges.nextMinutes(e)}}),lastHours:new i({name:s.LASTHOURS,tokenText:A(s.LASTHOURS,false),valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return f.ranges.lastHours(e)}}),nextHours:new i({name:s.NEXTHOURS,tokenText:A(s.NEXTHOURS,false),valueTypes:[{name:"sap.ui.model.type.Integer",formatOptions:{emptyString:null},constraints:{minimum:0}}],paramTypes:["(\\d+)"],additionalInfo:"",calcRange:function(e){return f.ranges.nextHours(e)}})},_mDefaultOpsForType:{},addOperator:function(e){_._mOperators[e.name]=e},addOperators:function(e){if(!Array.isArray(e)){e=[e]}e.forEach(e=>{_.addOperator(e)})},removeOperators:function(e){if(!Array.isArray(e)){e=[e]}e.forEach(e=>{_.removeOperator(e)})},removeOperator:function(e){if(typeof e==="string"){delete _._mOperators[e]}else{delete _._mOperators[e.name]}},setOperatorsForType:function(e,t,a){if(!Array.isArray(t)){t=[t]}if(!_._mDefaultOpsForType[e]){_._mDefaultOpsForType[e]={}}_._mDefaultOpsForType[e].operators=[];t.forEach(t=>{_.addOperatorForType(e,t)});if(a){_.setDefaultOperatorForType(e,a)}},setDefaultOperatorForType:function(e,t){if(!_._mDefaultOpsForType[e]){_._mDefaultOpsForType[e]={}}if(typeof t==="string"){t=_.getOperator(t)}_._mDefaultOpsForType[e].defaultOperator=t},addOperatorForType:function(e,t){_.insertOperatorForType(e,t)},insertOperatorForType:function(e,t,a){if(!_._mDefaultOpsForType[e]){_._mDefaultOpsForType[e]={operators:[]}}a=a===undefined?_._mDefaultOpsForType[e].operators.length:a;if(typeof t==="string"){t=_.getOperator(t)}_._mDefaultOpsForType[e].operators.splice(a,0,t)},removeOperatorForType:function(e,t){let a;if(typeof t==="string"){a=t}else{a=t.name}for(let t=0;t<_._mDefaultOpsForType[e].operators.length;t++){if(_._mDefaultOpsForType[e].operators[t].name===a){_._mDefaultOpsForType[e].operators.splice(t,1);return}}},getOperatorsForType:function(e){const t=[];for(let a=0;a<_._mDefaultOpsForType[e].operators.length;a++){t.push(_._mDefaultOpsForType[e].operators[a].name)}return t},getDefaultOperator:function(e){return _._mDefaultOpsForType[e].defaultOperator||_._mOperators.equal},getMatchingOperators:function(e,t){const a=[];for(let t=0;t<e.length;t++){const r=this.getOperator(e[t]);if(r){a.push(r)}}return x.call(this,a,t)},getOperator:function(e){for(const t in _._mOperators){const a=_._mOperators[t];if(a.name===e){return a}}return undefined},getEQOperator:function(e){if(e){for(let t=0;t<e.length;t++){const a=this.getOperator(e[t]);if(a&&a.validateInput&&!a.exclude&&a.valueTypes[0]&&a.valueTypes[0]!==m.Static){return a}}}return _._mOperators.equal},onlyEQ:function(e){if(e.length===1&&e[0]===s.EQ){return true}else{return false}},checkConditionsEmpty:function(e){if(!Array.isArray(e)){e=[e]}e.forEach(e=>{const t=this.getOperator(e.operator);if(t){e.isEmpty=t.isEmpty(e)}})},updateConditionsValues:function(e){if(!Array.isArray(e)){e=[e]}for(let t=0;t<e.length;t++){this.updateConditionValues(e[t])}},updateConditionValues:function(e){const t=this.getOperator(e.operator);if(t&&e.validated!==p.Validated){let a=t.valueTypes.length;if(t.valueTypes.length===2&&t.valueTypes[1]===null&&(e.values.length<2||e.values[1]===null||e.values[1]===undefined)){a=a-1}if(t.valueTypes[0]==="static"){e.values=[]}else{while(e.values.length!=a){if(e.values.length<a){e.values.push(null)}if(e.values.length>a){e.values=e.values.slice(0,e.values.length-1)}}}}},indexOfCondition:function(e,t){let a=-1;for(let r=0;r<t.length;r++){if(this.compareConditions(e,t[r])){a=r;break}}return a},compareConditions:function(e,t){let a=false;if(e.operator===t.operator){const r=this.getOperator(e.operator);if(r){a=r.compareConditions(e,t)}}return a},compareConditionsArray:function(e,t){let a=false;if(e.length===t.length){a=true;for(let r=0;r<e.length;r++){if(!this.compareConditions(e[r],t[r])){a=false;break}}}return a},checkConditionValidated:function(e){const t=this.getOperator(e.operator);if(!e.validated&&t&&t.checkValidated){t.checkValidated(e)}},getOperatorForDynamicDateOption:function(e,t){let a;if(t&&e.startsWith(t)){a=this.getOperator(e.slice(t.length+1))}else{a=this.getOperator(e)}if(!a&&t){for(const r in _._mOperators){const n=_._mOperators[r];if(n.alias&&n.alias[t]===e){a=n;break}}}return a},getDynamicDateOptionForOperator:function(e,t,a){let r;if(e){if(t[e.name]){r=e.name}else if(e.alias&&t[e.alias[a]]){r=e.alias[a]}}return r},getCustomDynamicDateOptionForOperator:function(e,t){return t+"-"+e.name}};_.setOperatorsForType(u.String,[_._mOperators.contains,_._mOperators.equal,_._mOperators.between,_._mOperators.startsWith,_._mOperators.endsWith,_._mOperators.lessThan,_._mOperators.lessEqual,_._mOperators.greaterThan,_._mOperators.greaterEqual,_._mOperators.empty,_._mOperators.notContains,_._mOperators.notEqual,_._mOperators.notBetween,_._mOperators.notStartsWith,_._mOperators.notEndsWith,_._mOperators.notLessThan,_._mOperators.notLessEqual,_._mOperators.notGreaterThan,_._mOperators.notGreaterEqual,_._mOperators.notEmpty],_._mOperators.equal);_.setOperatorsForType(u.Date,[_._mOperators.equal,_._mOperators.between,_._mOperators.lessThan,_._mOperators.lessEqual,_._mOperators.greaterThan,_._mOperators.greaterEqual,_._mOperators.notEqual,_._mOperators.notBetween,_._mOperators.notLessThan,_._mOperators.notLessEqual,_._mOperators.notGreaterThan,_._mOperators.notGreaterEqual,_._mOperators.today,_._mOperators.yesterday,_._mOperators.tomorrow,_._mOperators.firstDayWeek,_._mOperators.lastDayWeek,_._mOperators.firstDayMonth,_._mOperators.lastDayMonth,_._mOperators.firstDayQuarter,_._mOperators.lastDayQuarter,_._mOperators.firstDayYear,_._mOperators.lastDayYear,_._mOperators.todayFromTo,_._mOperators.lastDays,_._mOperators.nextDays,_._mOperators.thisWeek,_._mOperators.lastWeek,_._mOperators.lastWeeks,_._mOperators.nextWeek,_._mOperators.nextWeeks,_._mOperators.specificMonth,_._mOperators.specificMonthInYear,_._mOperators.thisMonth,_._mOperators.lastMonth,_._mOperators.lastMonths,_._mOperators.nextMonth,_._mOperators.nextMonths,_._mOperators.thisQuarter,_._mOperators.lastQuarter,_._mOperators.lastQuarters,_._mOperators.nextQuarter,_._mOperators.nextQuarters,_._mOperators.quarter1,_._mOperators.quarter2,_._mOperators.quarter3,_._mOperators.quarter4,_._mOperators.thisYear,_._mOperators.lastYear,_._mOperators.lastYears,_._mOperators.nextYear,_._mOperators.nextYears,_._mOperators.yearToDate,_._mOperators.dateToYear]);_.setOperatorsForType(u.DateTime,[_._mOperators.equal,_._mOperators.between,_._mOperators.lessThan,_._mOperators.lessEqual,_._mOperators.greaterThan,_._mOperators.greaterEqual,_._mOperators.notEqual,_._mOperators.notBetween,_._mOperators.notLessThan,_._mOperators.notLessEqual,_._mOperators.notGreaterThan,_._mOperators.notGreaterEqual,_._mOperators.lastMinutes,_._mOperators.nextMinutes,_._mOperators.lastHours,_._mOperators.nextHours,_._mOperators.today,_._mOperators.yesterday,_._mOperators.tomorrow,_._mOperators.firstDayWeek,_._mOperators.lastDayWeek,_._mOperators.firstDayMonth,_._mOperators.lastDayMonth,_._mOperators.firstDayQuarter,_._mOperators.lastDayQuarter,_._mOperators.firstDayYear,_._mOperators.lastDayYear,_._mOperators.todayFromTo,_._mOperators.lastDays,_._mOperators.nextDays,_._mOperators.thisWeek,_._mOperators.lastWeek,_._mOperators.lastWeeks,_._mOperators.nextWeek,_._mOperators.nextWeeks,_._mOperators.specificMonth,_._mOperators.specificMonthInYear,_._mOperators.thisMonth,_._mOperators.lastMonth,_._mOperators.lastMonths,_._mOperators.nextMonth,_._mOperators.nextMonths,_._mOperators.thisQuarter,_._mOperators.lastQuarter,_._mOperators.lastQuarters,_._mOperators.nextQuarter,_._mOperators.nextQuarters,_._mOperators.quarter1,_._mOperators.quarter2,_._mOperators.quarter3,_._mOperators.quarter4,_._mOperators.thisYear,_._mOperators.lastYear,_._mOperators.lastYears,_._mOperators.nextYear,_._mOperators.nextYears,_._mOperators.yearToDate,_._mOperators.dateToYear]);_.setOperatorsForType(u.Numeric,[_._mOperators.equal,_._mOperators.between,_._mOperators.lessThan,_._mOperators.lessEqual,_._mOperators.greaterThan,_._mOperators.greaterEqual,_._mOperators.notEqual,_._mOperators.notBetween,_._mOperators.notLessThan,_._mOperators.notLessEqual,_._mOperators.notGreaterThan,_._mOperators.notGreaterEqual]);_.setOperatorsForType(u.Time,[_._mOperators.equal,_._mOperators.between,_._mOperators.lessThan,_._mOperators.lessEqual,_._mOperators.greaterThan,_._mOperators.greaterEqual,_._mOperators.notEqual,_._mOperators.notBetween,_._mOperators.notLessThan,_._mOperators.notLessEqual,_._mOperators.notGreaterThan,_._mOperators.notGreaterEqual]);_.setOperatorsForType(u.Boolean,[_._mOperators.equal,_._mOperators.notEqual]);function x(e,t){const a=[];for(const r of e){if(r&&r.test&&r.test(t)){a.push(r)}}return a}function S(e){return e===null||e===undefined||e===""}function R(){if(!this._aMonths){const e=new c,t=O.getDateInstance({pattern:"LLLL"});e.setDate(15);e.setMonth(0);const a=[];for(let r=0;r<12;r++){a.push(t.format(e));e.setMonth(e.getMonth()+1)}this._aMonths=a}return this._aMonths}function D(e){const t=e.toLowerCase();const a=R.apply(this);let r=-1;a.some((a,n)=>{if(a.toLowerCase()===t||Number.parseInt(e)===n+1){r=n;return true}});return r}let v=false;function w(){const e="LFHForSpecificMonth";if(!v){v=true;T(["sap/ui/mdc/valuehelp/content/FixedList","sap/ui/mdc/valuehelp/content/FixedListItem","sap/ui/mdc/ValueHelp","sap/ui/mdc/valuehelp/Popover","sap/ui/core/Control"]).then(t=>{const a=t[0];const r=t[1];const o=t[2];const s=t[3];const l=t[4];const i=function(){if(!this._aMonthsItems){const e=R.apply(this);this._aMonthsItems=[];for(let t=0;t<12;t++){this._aMonthsItems.push({text:e[t],key:t})}}return this._aMonthsItems}.bind(this);const u=new o(e,{typeahead:new s(e+"-pop",{content:[new a(e+"-FL",{filterList:false,useFirstMatch:true,items:{path:"$items>/",template:new r({text:"{$items>text}",key:"{$items>key}"}),templateShareable:false}})]})}).setModel(new y(i()),"$items");try{const t=g.getUIArea();const a=new l(e+"-parent",{dependents:[u]});t.addContent(a,true)}catch(e){n.error(e);throw new Error("MonthValueHelp cannot be assigned because static UIArea cannot be determined.")}})}return e}function A(e,t){const a="operators."+e+(t?".longText":".tokenText");return E.getText(a,undefined,true)}function k(e,t){const a="operators."+e+".longText";const r={};for(let e=0;e<t.length;e++){r[t[e]]=E.getText(a+"."+t[e].toLowerCase(),undefined,true)}return r}return _},true);
//# sourceMappingURL=FilterOperatorUtil.js.map