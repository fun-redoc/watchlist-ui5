/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/util/loadModules","sap/m/p13n/Engine","sap/base/Log"],(e,n,t)=>{"use strict";const i={};i.APPLY="apply";i.REVERT="revert";function a(e){const n=e&&e.getUIArea&&e.getUIArea();if(n&&!e._bInvalidationSuppressed){e._bInvalidationSuppressed=n.suppressInvalidationFor(e)}}function o(e){const n=e&&e.getUIArea&&e.getUIArea();if(n&&e._bInvalidationSuppressed){n.resumeInvalidationFor(e);delete e._bInvalidationSuppressed}}function r(e,i){if(e.isA){n.getInstance().trace(e,{selectorElement:e,changeSpecificData:{changeType:i.getChangeType(),content:i.getContent()}});if(!e._pPendingModification&&e._onModifications instanceof Function){e._pPendingModification=n.getInstance().waitForChanges(e).then(async()=>{const t=n.getInstance().getTrace(e);n.getInstance().clearTrace(e);delete e._pPendingModification;n.getInstance().fireStateChange(e);await e._onModifications(t);o(e)}).catch(n=>{t.error(`Error during mdc flex handling: ${n}`);o(e)})}}}i.getModule=function(e){return new Promise((n,t)=>{sap.ui.require([e],n,t)}).then(e=>e)};i.getMdcResourceText=function(e,n){return i.getModule("sap/ui/core/Lib").then(t=>t.getResourceBundleFor("sap.ui.mdc").getText(e,n))};i.createChangeHandler=function(n){const t=n.apply instanceof Function&&n.apply;const o=n.revert instanceof Function&&n.revert;const c=n.complete instanceof Function&&n.complete;if(!t||!o){throw new Error("Please provide atleast an apply and revert function!")}return{changeHandler:{applyChange:function(e,n,o){a(n);return t(e,n,o,i.APPLY).then(()=>{r(n,e)})},completeChangeContent:function(e,n,t){if(c){c(e,n,t)}},revertChange:function(e,n,t){a(n);return o(e,n,t,i.REVERT).then(()=>{r(n,e)})},onAfterXMLChangeProcessing:function(n,t){return t.modifier.getProperty(n,"delegate").then(i=>{if(i){return e(i.name).then(e=>{const i=e[0];if(i.onAfterXMLChangeProcessing instanceof Function){i.onAfterXMLChangeProcessing(n,t)}})}})},getCondenserInfo:n.getCondenserInfo,getChangeVisualizationInfo:n.getChangeVisualizationInfo},layers:{USER:true}}};return i});
//# sourceMappingURL=Util.js.map