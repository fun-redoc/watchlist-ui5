/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./BaseContent","./BaseListContentRenderer","sap/ui/integration/util/BindingResolver","sap/m/IllustratedMessageType","sap/ui/integration/library","sap/base/Log","sap/ui/model/Sorter"],function(t,e,i,n,r,a,s){"use strict";var o=t.extend("sap.ui.integration.cards.BaseListContent",{metadata:{library:"sap.ui.integration"},renderer:e});o.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oAwaitingPromise=null;this._fMinHeight=0;this._bIsFirstRendering=true};o.prototype.exit=function(){t.prototype.exit.apply(this,arguments);this._oAwaitingPromise=null};o.prototype.onAfterRendering=function(){if(!this._bIsFirstRendering){this._keepHeight()}this._bIsFirstRendering=false};o.prototype.onDataChanged=function(){if(this.hasData()){this.hideNoDataMessage()}else{this.showNoDataMessage({illustrationType:n.NoEntries,title:this.getCardInstance().getTranslatedText("CARD_NO_ITEMS_ERROR_LISTS")})}this.getPaginator()?.onDataChanged(this)};o.prototype.setModelData=function(e,i){const n=this.getPaginator();if(n?.isLoadingMore()){n.setModelData(e,i)}else{t.prototype.setModelData.apply(this,arguments)}};o.prototype._keepHeight=function(){if(!this.getDomRef()){return}var t=this.getDomRef().getBoundingClientRect().height;if(t>this._fMinHeight){this._fMinHeight=t}if(this._fMinHeight){this.getDomRef().style.minHeight=this._fMinHeight+"px"}this._keepPlaceholderMinItems()};o.prototype._keepPlaceholderMinItems=function(){var t=this.getAggregation("_loadingPlaceholder"),e=!!this.getAggregation("_content"),i,n;if(!t||!t.getMinItems||!e){return}i=this.getItemsLength();n=Math.max(t.getMinItems(),i);t.setMinItems(n)};o.prototype.applyConfiguration=function(){var t=this.getParsedConfiguration();if(!t){return}var e=this.getInnerList(),n=i.resolveValue(t.maxItems,this);if(!Number.isNaN(parseInt(n))){n=parseInt(n)}const r=this.getPaginator();if(e&&(!r||!r.getActive())){let t=n;if(r){t=r.getPageSize()}if(t){e.applySettings({growing:true,growingThreshold:t});e.addStyleClass("sapFCardMaxItems")}}this._fMinHeight=0};o.prototype.getInnerList=function(){return null};o.prototype.getItemsLength=function(){return 0};o.prototype.setPaginator=function(t){this._oPaginator=t};o.prototype.getPaginator=function(){return this._oPaginator};o.prototype._checkHiddenNavigationItems=function(t){if(!t.actions){return}if(!this.getInnerList()){return}var e=this.getInnerList(),n=this.isA("sap.ui.integration.cards.TimelineContent")?e.getContent():e.getItems(),r=[],s=t.actions[0],o,g=0;if(!s||!s.service||s.type!=="Navigation"){return}if(s.service==="object"){o=s.service.name}else{o=s.service}n.forEach(function(t){var e=i.resolveValue(s.parameters,this,t.getBindingContext().getPath());r.push(this._oServiceManager.getService(o).then(function(t){if(!t.hidden){return false}return t.hidden({parameters:e})}).then(function(e){t.setVisible(!e);if(!e){g++}}).catch(function(t){a.error(t)}))}.bind(this));this.awaitEvent("_filterNavItemsReady");var h=this._oAwaitingPromise=Promise.all(r).then(function(){if(this._oAwaitingPromise===h){if(this.getModel("parameters")){this.getModel("parameters").setProperty("/visibleItems",g)}this.fireEvent("_filterNavItemsReady")}}.bind(this))};o.prototype.hasData=function(){var t=this.getInnerList(),e=t.getBinding(t.getMetadata().getDefaultAggregationName()),i=e.getModel(),n=e.getPath(),r=i.getProperty(n);if(r&&r.length){return true}return false};o.prototype._getGroupSorter=function(t){var e=false;if(t.order.dir&&t.order.dir==="DESC"){e=true}var n=new s(t.order.path,e,function(e){return i.resolveValue(t.title,e.getModel(),e.getPath())});return n};o.prototype.getDataLength=function(){var t=this.getModel().getProperty(this.getInnerList().getBindingContext().getPath());if(Array.isArray(t)){return t.length}return Object.getOwnPropertyNames(t).length};return o});
//# sourceMappingURL=BaseListContent.js.map