/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/BindingParser","sap/base/util/extend","sap/base/util/isPlainObject","sap/ui/integration/formatters/DateTimeFormatter","sap/ui/integration/formatters/NumberFormatter","sap/ui/integration/formatters/TextFormatter","sap/ui/integration/bindingFeatures/DateRange","sap/ui/integration/formatters/InitialsFormatter"],function(e,r,t,n,a,i,s,f){"use strict";function o(e){if(typeof e!=="string"){return false}return/\Wsize\(/.test(e)}var u=/\{\{([^}]+)\}\}/g,p=/\{\{(parameters\.[^}]+)\}\}/g,c=/\{\{(dataSources\.[^}]+)\}\}/g;var d={};var l={date:n.date,dateTime:n.dateTime,currency:a.currency,float:a.float,integer:a.integer,percent:a.percent,text:i.text,unit:a.unit,initials:f.initials};d.mLocals={format:l,dateRange:s};d.extractBindingInfo=function(t,n){t=d.escapeCardPlaceholders(t);let a=e.complexParser(t,undefined,true,undefined,undefined,undefined,r({},d.mLocals,n));if(o(t)){const e=a;if(e==="true"){a=true}else if(e==="false"){a=false}else if(e==="null"){a=null}else if(e==="undefined"){a=undefined}else if(!Number.isNaN(Number(e))){a=Number(e)}}return a};d.createBindingInfos=function(e,r){if(!e){return e}if(Array.isArray(e)){return e.map(function(e){return d.createBindingInfos(e,r)})}if(t(e)){var n={};for(var a in e){n[a]=d.createBindingInfos(e[a],r)}return n}if(typeof e==="string"){var i=d.extractBindingInfo(e,r);if(o(e)){return i}return d.escapeParametersAndDataSources(i||e)}return e};d.formattedProperty=function(e,t){if(e===undefined){return e}var n={};if(Array.isArray(e)){n.parts=e.map(function(e){return typeof e==="object"?r({},e):{value:e}});n.formatter=t}else if(typeof e==="object"){n=r({},e);if(e.formatter){var a=n.formatter;n.formatter=function(){var e=a.apply(this,arguments);return t(e)}}else{n.formatter=t}}else{n={value:e,formatter:t}}return n};d.escapeCardPlaceholders=function(e){if(typeof e!=="string"){return e}return e.replace(u,"\\{\\{$1\\}\\}")};d.escapeParametersAndDataSources=function(e){if(typeof e!=="string"){return e}return e.replace(p,"\\{\\{$1\\}\\}").replace(c,"\\{\\{$1\\}\\}")};d.isAbsolutePath=function(e){return e.startsWith("/")};d.prependRelativePaths=function(e,t){if(!e){return e}if(d.isBindingInfo(e)){var n=r({},e);if(n.path&&!this.isAbsolutePath(n.path)){n.path=t+"/"+n.path}if(n.parts){n.parts=n.parts.map(function(e){return d.prependRelativePaths(e,t)})}return n}if(Array.isArray(e)){return e.map(function(e){return d.prependRelativePaths(e,t)})}if(typeof e==="object"){var a={};for(var i in e){a[i]=d.prependRelativePaths(e[i],t)}return a}return e};d.propagateModels=function(e,t){var n=r({},e.oPropagatedProperties.oModels,e.oModels),a=Object.keys(n),i=e.getModel();if(i){t.setModel(i)}a.forEach(function(r){if(r==="undefined"){return}var n=e.getModel(r);if(n){t.setModel(n,r)}})};d.reuse=function(e){if(typeof e==="object"){return r({},e)}return e};d.isBindingInfo=function(e){if(!e){return false}return e.hasOwnProperty("path")||e.hasOwnProperty("parts")&&(e.hasOwnProperty("formatter")||e.hasOwnProperty("binding"))};return d});
//# sourceMappingURL=BindingHelper.js.map